
DROP TABLE participation;
DROP TABLE quiz;
DROP TABLE preview;

commit;

DROP SEQUENCE seq_participation_part_no;
DROP SEQUENCE seq_quiz_quiz_no;
DROP SEQUENCE seq_preview_preview_no;

commit;

CREATE SEQUENCE seq_participation_part_no   INCREMENT BY 1 START WITH 10000 maxValue 99999 NOCACHE;
CREATE SEQUENCE seq_quiz_quiz_no	   		INCREMENT BY 1 START WITH 10000 maxValue 99999 NOCACHE;
CREATE SEQUENCE seq_preview_preview_no     	INCREMENT BY 1 START WITH 10000 maxValue 99999 NOCACHE;

commit;

CREATE TABLE preview ( 
	preview_no		 NUMERIC(5)	 		NOT NULL,
	preview_name 	 VARCHAR2(120)	 	NOT NULL,
	preview_place	 VARCHAR2(100)	 	NOT NULL,
	preview_date	 TIMESTAMP 			NOT NULL,
	image_file	 	 VARCHAR2(4000) 	NOT NULL,
	start_date		 TIMESTAMP	 		NOT NULL,
	end_date		 TIMESTAMP	 		NOT NULL,
	winner_count 	 NUMERIC(3)	 		NOT NULL,
	winner_date	 	 TIMESTAMP	 		NOT NULL,
	preview_regdate	 TIMESTAMP	 		NOT NULL,
	preview_status	 NUMERIC(2)	 		DEFAULT 0,
	PRIMARY KEY(preview_no)
);

CREATE TABLE quiz ( 
	quiz_no			 NUMERIC(5)	 		NOT NULL,
	question		 VARCHAR2(500)	 	NOT NULL,
	option1			 VARCHAR2(200)	 	NOT NULL,
	option2			 VARCHAR2(200)	 	NOT NULL,
	option3	 		 VARCHAR2(200)	 	NOT NULL,
	option4			 VARCHAR2(200)		NOT NULL,
	answer			 NUMERIC(2)			NOT NULL,
	start_date	 	 TIMESTAMP	 		NOT NULL,
	end_date		 TIMESTAMP	 		NOT NULL,
	quiz_date		 TIMESTAMP	 		NOT NULL,
	quiz_status	     NUMERIC(2)		 	DEFAULT 0,
	PRIMARY KEY(quiz_no)
);

CREATE TABLE participation ( 
	part_no			 NUMERIC(5)	 		NOT NULL,
	quiz_no	 		 NUMERIC(5)	 		REFERENCES quiz(quiz_no),
	preview_no		 NUMERIC(5)	 		REFERENCES preview(preview_no),
	user_no			 NUMERIC(5)	 		REFERENCES users(user_no),
	part_type		 NUMERIC(1)	 		NOT NULL,
	winning_flag	 NUMERIC(2)	 		DEFAULT 0,
	part_date		 TIMESTAMP 			NOT NULL,
	PRIMARY KEY(part_no)
);

set linesize 500;
set pagesize 500;

COMMIT;


INSERT INTO QUIZ
(QUIZ_NO, QUESTION, OPTION1, OPTION2, OPTION3, OPTION4, ANSWER, START_DATE, END_DATE, QUIZ_DATE, QUIZ_STATUS)
VALUES(seq_quiz_quiz_no.nextval, '기생충에 나온 배우는??', '송강호', '오함마', '이병헌', '심수봉', 1, TIMESTAMP '2020-02-02 13:30:00.000000', TIMESTAMP '2020-02-19 13:30:00.000000', sysdate , 0);

INSERT INTO QUIZ
(QUIZ_NO, QUESTION, OPTION1, OPTION2, OPTION3, OPTION4, ANSWER, START_DATE, END_DATE, QUIZ_DATE, QUIZ_STATUS)
VALUES(seq_quiz_quiz_no.nextval, '샘 멘데스 감독의 작품 1917에서 열연을 펼친 두 주연 배우 중, 드라마 왕좌의 게임에서 극중 심약한 왕자 토멘 바라테온을 연기한 배우는?', '조지 맥케이', '딘 찰스 채프먼', '로저 디킨스', '베네딕트 컴버배치', 4, TIMESTAMP, '2020-02-02 13:30:00.000000', TIMESTAMP '2020-02-19 13:30:00.000000', sysdate , 0);

INSERT INTO QUIZ
(QUIZ_NO, QUESTION, OPTION1, OPTION2, OPTION3, OPTION4, ANSWER, START_DATE, END_DATE, QUIZ_DATE, QUIZ_STATUS)
VALUES(seq_quiz_quiz_no.nextval, '배우 신혜선이 첫 스크린 주연을 맡았다. 오는 3월 개봉예정인 이 영화는?', '자백', '고백', '결백', '독백', 3, TIMESTAMP '2020-02-02 13:30:00.000000', TIMESTAMP '2020-02-19 13:30:00.000000', sysdate , 0);
  
INSERT INTO QUIZ
(QUIZ_NO, QUESTION, OPTION1, OPTION2, OPTION3, OPTION4, ANSWER, START_DATE, END_DATE, QUIZ_DATE, QUIZ_STATUS)
VALUES(seq_quiz_quiz_no.nextval, '2001년부터 2019년까지 스핀 오프를 포함해 총 아홉 편이 제작된, ‘분노의 질주’ 시리즈는 대표적인 레이싱 액션 영화다. 오는 5월에 개봉예정인 분노의 질주는 몇 탄인가?', '분노의 질주8', '분노의 질주9', '분노의 질주10', '분노의 질주11', 2, TIMESTAMP '2020-02-02 13:30:00.000000', TIMESTAMP '2020-02-19 13:30:00.000000', sysdate , 0);
  


INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<수정된>시사회이름', '우리집', TIMESTAMP '2020-02-20 17:17:00.000000', '1580891814275_inter.PNG', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-28 17:33:35.000000', 0);
INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<니니>시사회', 'CGV강남', TIMESTAMP '2020-02-20 17:17:00.000000', 'ddddddddd.jpg', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-28 21:03:17.000000', 1);
INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<야호야호>시사회', 'CGV운정', TIMESTAMP '2020-02-20 17:17:00.000000', '1580892013403_hw.PNG', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-29 12:48:06.000000', 1);
INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<비트캠프>시사회', 'CGV랄라', TIMESTAMP '2020-02-20 17:17:00.000000', '1580892543906_san.PNG', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-29 12:48:36.000000', 1);
INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<인셉션>시사회', 'CGV홍대', TIMESTAMP '2020-02-20 17:17:00.000000', '1581049824184_dead.PNG', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-28 17:37:49.485000', 0);
INSERT INTO PREVIEW
VALUES(seq_preview_preview_no.nextval, '<가나다라>시사회', 'CGV강남', TIMESTAMP '2020-02-20 17:17:00.000000', 'a.PNG', TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2030-03-15 15:30:00.000000', 30, TIMESTAMP '2020-01-28 00:30:00.000000', TIMESTAMP '2020-01-28 17:38:04.139000', 1);



/*part_type이 1이면 시사회 이벤트 응모!*/
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10005, 10003, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10000, 10003, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10004, 10003, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10006, 10003, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10003, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10005, 10004, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10000, 10004, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10004, 10004, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10006, 10004, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10004, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10005, 10005, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10000, 10005, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10004, 10005, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10006, 10005, 1, sysdate);
INSERT INTO PARTICIPATION (PART_NO,  PREVIEW_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10005, 1, sysdate);




/*part_type이 0이면 퀴즈 참여!*/
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10001, 10003, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10003, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10001, 10004, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10004, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10001, 10005, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10005, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10001, 10006, 0, sysdate);
INSERT INTO PARTICIPATION (PART_NO, QUIZ_NO, USER_NO, PART_TYPE, PART_DATE) VALUES(seq_participation_part_no.NEXTVAL, 10002, 10006, 0, sysdate);
